# 220301

## 타입 변환과 단축평가

타입변환

- 명시적 타입 변환(타입 캐스팅) : 개발자에 의해 의도적 값의 타입을 변환하는 것
- 암묵적 타입 변환(타입 강제 변환) : 자바스크립트 엔진에 의해 암묵적으로 타입이 자동으로 변환
- 위 두 변환은 기존 값을 직접 변경하는 것이 아니라 기존 값을 바탕으로 새로운 타입의 값을 만들어 단 한번 사용하고 버린다.

- 표현식의 평가가 끝나면 아무도 참조하지 않으므로 가비지 컬렉터에 의해 메모리에서 제거된다.





자바스크립트는 컨텍스트에 고려하여 암묵적 타입 변환을 실행한다.

> Lexical Scope 이후 다시 자세히 다룰것.



```js
// 표현식이 모두 문자열 타입이여야 하는 컨텍스트
'10' + 2 //'102'
`1 * 10 = ${1 * 10}` // "1 * 10 = 10"

// 표현식이 모두 숫자 타입이어야 하는 컨텍스트
5 * '10' // 50

// 표현식이 불리언 타입이여야 하는 컨텍스트
!0 // true
```



- 연산자 식의 피연산자만이 암묵적 타입 변환의 대상이 되는 것은 아님.
- 표현식을 평가할 때 문맥, 즉 컨텍스트에 부합하도록 암묵적 타입 변환을 실행함 (위와 같은 이야기)

- 문자열 타입으로 변환

```js
1 + '2' // "12"	
+ 연산자는 피연산자중 하나 이상이 문자열이므로 문자열 연결 연산자로 동작함.
=> 피연산자는 컨텍스트 상 문자열 타입이어야 함.
=> 백틱을 이용해 표현하는 템플릿 리터럴 문자열 인터폴레이션은 표현식의 평가 결과를 문자열 타입으로 암묵적 타입 변환을 한다.
```



- 숫자 타입으로 변환

```js
1 - '1' // 0
1 * '10' // 10
1 / 'one' // NaN
```

산술 연산자 표현식을 평가하기 위해 산술 연산자의 피연산자 중에서 숫자 타입이 아닌 피연산자를 숫자 타입으로 암묵적 타입 변환한다



- 불리언 타입으로 변환

```
false로 평가되는 Falsy 값
- false
- undefined
- null
- 0, -0
- NaN
- ""
```



### 명시적 변환

1. String 생성자 함수를 new 연산자 없이 호출하는 방법
2. Object.prototype.toString 메소드 사용하는 방법
3. 문자열 연결 연산자를 이용하는 방법

#### 문자열 타입으로 변환

```
String()
.toString()
 + ''
```



#### 숫자 타입으로 변환

```
Number()
parseInt()
 * 1
```



#### 불리언 타입으로 변환

```
Boolean()
(!!abc)
```

#### 

#### 단축 평가

```js
'Cat' && 'Dog' // "Dog"
```

- 논리곱 연산자 &&는 논리 연산의 결과를 결정한 두번째 피연산자의 평가 결과 즉, 문자열 'Dog'를 그대로 반환한다.



```js
'Cat' || 'Dog' // 'Cat'
```

- 논리합 연산자 || 는 논리 연산의 결과를 결정한 첫번째 피연산자의 평가 결과, 즉 'Cat'를 그대로 반환한다.



- 객체가 null 인지 확인하고 프로퍼티를 참조할 때

```js
var elem = null;
console.log(elem.value) // TypeError
console.log(elem && elem.value) // null
```

객체는 키와 값으로 구성된 프로퍼티들의 집합인데 객체가 null일 경우, 객체의 프로퍼티를 참조하면 타입 에러를 발생시킨다.

> 모든 js 객체는 Object객체와 Object.prototype 객체의 모든 프로퍼티를 상속받는다.



- 함수의 인수를 초기화할 때

```js
// 단축 평가를 사용한 매개변수의 기본값 설정
function getStringLength(str) {
	str = str || '';
	return str.length;
}

getStringLength();
getStringLength('hi');

// ES6의 매개변수의 기본값 설정
function getStringLength(str = ''){
    return str.length;
}

getStringLength();	// 0 
getStringLength('hi'); // 2
```



